<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversor de Moedas Profissional</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary-color: #f8fafc;
            --accent-color: #10b981;
            --error-color: #ef4444;
            --warning-color: #f59e0b;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --shadow-light: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-medium: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-large: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .main-container {
            width: 100%;
            max-width: 1200px;
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
            align-items: start;
        }

        .converter-card {
            background: white;
            border-radius: 24px;
            padding: 40px;
            box-shadow: var(--shadow-large);
            position: relative;
        }

        .converter-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--primary-color) 0%, var(--accent-color) 100%);
            border-radius: 24px 24px 0 0;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
            letter-spacing: -0.025em;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            font-weight: 400;
            margin-bottom: 20px;
        }

        .language-selector {
            position: relative;
            display: inline-block;
            margin-top: 15px;
            z-index: 1000;
        }

        .selected-language {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: var(--secondary-color);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.9rem;
            color: var(--text-primary);
            transition: all 0.2s ease;
            min-width: 140px;
            justify-content: space-between;
        }

        .selected-language:hover {
            border-color: var(--primary-color);
            background: white;
        }

        .language-selector.open .selected-language {
            border-color: var(--primary-color);
            background: white;
        }

        .flag {
            width: 20px;
            height: 15px;
            border-radius: 2px;
            object-fit: cover;
            border: 1px solid rgba(0,0,0,0.1);
        }

        .arrow {
            transition: transform 0.2s ease;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .language-selector.open .arrow {
            transform: rotate(180deg);
        }

        .dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            box-shadow: var(--shadow-medium);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s ease;
            z-index: 10001;
            margin-top: 4px;
            max-height: 300px;
            overflow-y: auto;
        }

        .dropdown::-webkit-scrollbar {
            width: 6px;
        }

        .dropdown::-webkit-scrollbar-track {
            background: var(--secondary-color);
        }

        .dropdown::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        .dropdown::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }

        .language-selector.open .dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .language-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            cursor: pointer;
            font-size: 0.9rem;
            color: var(--text-primary);
            transition: background-color 0.2s ease;
            border-bottom: 1px solid var(--border-color);
        }

        .language-option:last-child {
            border-bottom: none;
        }

        .language-option:hover {
            background-color: var(--secondary-color);
        }

        .language-option.selected {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(16, 185, 129, 0.1));
            color: var(--primary-color);
            font-weight: 500;
            border-left: 3px solid var(--primary-color);
        }

        .currency-section {
            margin-bottom: 30px;
        }

        .section-label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .input-container {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 15px;
            align-items: center;
        }

        .amount-input {
            position: relative;
        }

        .amount-input input {
            width: 100%;
            padding: 20px 24px;
            border: 2px solid var(--border-color);
            border-radius: 16px;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            background: var(--secondary-color);
            transition: all 0.2s ease;
        }

        .amount-input input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: white;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .currency-select {
            position: relative;
        }

        .currency-select select {
            appearance: none;
            padding: 20px 50px 20px 20px;
            border: 2px solid var(--border-color);
            border-radius: 16px;
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-primary);
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 180px;
        }

        .currency-select select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .currency-select::after {
            content: '‚ñº';
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            pointer-events: none;
            font-size: 0.8rem;
        }

        .swap-section {
            display: flex;
            justify-content: center;
            margin: 25px 0;
        }

        .swap-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: var(--shadow-medium);
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .swap-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.1);
            box-shadow: var(--shadow-large);
        }

        .result-section {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin-top: 30px;
            text-align: center;
            transform: translateY(10px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .result-section.show {
            transform: translateY(0);
            opacity: 1;
        }

        .result-amount {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .result-rate {
            font-size: 1rem;
            opacity: 0.9;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .info-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--shadow-medium);
        }

        .info-card h3 {
            color: var(--text-primary);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .rate-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .rate-item:last-child {
            border-bottom: none;
        }

        .rate-currency {
            font-weight: 500;
            color: var(--text-primary);
        }

        .rate-value {
            font-weight: 600;
            color: var(--accent-color);
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-color);
            animation: pulse 2s infinite;
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: var(--primary-color);
            font-weight: 500;
            padding: 20px;
        }

        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-color);
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .error {
            background: var(--error-color);
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            margin-top: 20px;
            display: none;
            font-weight: 500;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* RTL Support for Arabic */
        [lang="ar-SA"] {
            direction: rtl;
            text-align: right;
        }

        [lang="ar-SA"] .input-container {
            direction: rtl;
        }

        [lang="ar-SA"] .section-label {
            flex-direction: row-reverse;
        }

        [lang="ar-SA"] .selected-language {
            flex-direction: row-reverse;
        }

        [lang="ar-SA"] .language-option {
            flex-direction: row-reverse;
        }

        [lang="ar-SA"] .currency-select::after {
            left: 15px;
            right: auto;
        }

        [lang="ar-SA"] .language-option.selected {
            border-left: none;
            border-right: 3px solid var(--primary-color);
        }

        /* Fonts for different languages */
        [lang="ja-JP"] {
            font-family: 'Inter', 'Noto Sans JP', 'Hiragino Sans', 'Yu Gothic', sans-serif;
        }

        [lang="zh-CN"] {
            font-family: 'Inter', 'Noto Sans SC', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }

        [lang="ru-RU"] {
            font-family: 'Inter', 'Roboto', 'PT Sans', sans-serif;
        }

        [lang="ar-SA"] {
            font-family: 'Inter', 'Noto Sans Arabic', 'Tahoma', sans-serif;
        }

        @media (max-width: 768px) {
            .main-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .converter-card {
                padding: 25px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .input-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .currency-select select {
                width: 100%;
            }

            .dropdown {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 90vw;
                max-width: 300px;
                max-height: 70vh;
                z-index: 99999;
            }

            .language-selector.open::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 99998;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="converter-card">
            <div class="header">
                <h1 id="mainTitle">Conversor de Moedas Profissional</h1>
                <p id="mainSubtitle">com cota√ß√µes em tempo real</p>
                
                <div class="language-selector" id="languageSelector">
                    <div class="selected-language" id="selectedLanguage">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <img class="flag" src="https://flagcdn.com/w40/br.png" alt="Brasil" id="selectedFlag">
                            <span class="text">Portugu√™s</span>
                        </div>
                        <span class="arrow">‚ñº</span>
                    </div>
                    <div class="dropdown" id="dropdown">
                        <div class="language-option selected" data-lang="pt" data-flag="https://flagcdn.com/w40/br.png" data-text="Portugu√™s">
                            <img class="flag" src="https://flagcdn.com/w40/br.png" alt="Brasil">
                            <span class="text">Portugu√™s</span>
                        </div>
                        <div class="language-option" data-lang="en" data-flag="https://flagcdn.com/w40/us.png" data-text="English">
                            <img class="flag" src="https://flagcdn.com/w40/us.png" alt="United States">
                            <span class="text">English</span>
                        </div>
                        <div class="language-option" data-lang="es" data-flag="https://flagcdn.com/w40/es.png" data-text="Espa√±ol">
                            <img class="flag" src="https://flagcdn.com/w40/es.png" alt="Espa√±a">
                            <span class="text">Espa√±ol</span>
                        </div>
                        <div class="language-option" data-lang="fr" data-flag="https://flagcdn.com/w40/fr.png" data-text="Fran√ßais">
                            <img class="flag" src="https://flagcdn.com/w40/fr.png" alt="France">
                            <span class="text">Fran√ßais</span>
                        </div>
                        <div class="language-option" data-lang="de" data-flag="https://flagcdn.com/w40/de.png" data-text="Deutsch">
                            <img class="flag" src="https://flagcdn.com/w40/de.png" alt="Deutschland">
                            <span class="text">Deutsch</span>
                        </div>
                        <div class="language-option" data-lang="it" data-flag="https://flagcdn.com/w40/it.png" data-text="Italiano">
                            <img class="flag" src="https://flagcdn.com/w40/it.png" alt="Italia">
                            <span class="text">Italiano</span>
                        </div>
                        <div class="language-option" data-lang="ja" data-flag="https://flagcdn.com/w40/jp.png" data-text="Êó•Êú¨Ë™û">
                            <img class="flag" src="https://flagcdn.com/w40/jp.png" alt="Japan">
                            <span class="text">Êó•Êú¨Ë™û</span>
                        </div>
                        <div class="language-option" data-lang="zh" data-flag="https://flagcdn.com/w40/cn.png" data-text="‰∏≠Êñá">
                            <img class="flag" src="https://flagcdn.com/w40/cn.png" alt="China">
                            <span class="text">‰∏≠Êñá</span>
                        </div>
                        <div class="language-option" data-lang="ru" data-flag="https://flagcdn.com/w40/ru.png" data-text="–†—É—Å—Å–∫–∏–π">
                            <img class="flag" src="https://flagcdn.com/w40/ru.png" alt="Russia">
                            <span class="text">–†—É—Å—Å–∫–∏–π</span>
                        </div>
                        <div class="language-option" data-lang="ar" data-flag="https://flagcdn.com/w40/sa.png" data-text="ÿßŸÑÿπÿ±ÿ®Ÿäÿ©">
                            <img class="flag" src="https://flagcdn.com/w40/sa.png" alt="Saudi Arabia">
                            <span class="text">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="currency-section">
                <div class="section-label">
                    <span>üí∞</span>
                    <span id="labelFrom">De</span>
                </div>
                <div class="input-container">
                    <div class="amount-input">
                        <input type="number" id="fromAmount" value="1" min="0" step="0.01" placeholder="0.00" aria-label="Valor de origem">
                    </div>
                    <div class="currency-select">
                        <select id="fromCurrency" aria-label="Moeda de origem">
                            <option value="BRL">BRL - Real Brasileiro</option>
                            <option value="USD">USD - D√≥lar Americano</option>
                            <option value="EUR">EUR - Euro</option>
                            <option value="GBP">GBP - Libra Esterlina</option>
                            <option value="JPY">JPY - Iene Japon√™s</option>
                            <option value="CAD">CAD - D√≥lar Canadense</option>
                            <option value="AUD">AUD - D√≥lar Australiano</option>
                            <option value="CHF">CHF - Franco Su√≠√ßo</option>
                            <option value="CNY">CNY - Yuan Chin√™s</option>
                            <option value="ARS">ARS - Peso Argentino</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="swap-section">
                <button class="swap-btn" onclick="swapCurrencies()" title="Trocar moedas" aria-label="Trocar moedas">
                    ‚áÖ
                </button>
            </div>

            <div class="currency-section">
                <div class="section-label">
                    <span>üíé</span>
                    <span id="labelTo">Para</span>
                </div>
                <div class="input-container">
                    <div class="amount-input">
                        <input type="number" id="toAmount" readonly placeholder="0.00" aria-label="Valor convertido">
                    </div>
                    <div class="currency-select">
                        <select id="toCurrency" aria-label="Moeda de destino">
                            <option value="USD">USD - D√≥lar Americano</option>
                            <option value="BRL">BRL - Real Brasileiro</option>
                            <option value="EUR">EUR - Euro</option>
                            <option value="GBP">GBP - Libra Esterlina</option>
                            <option value="JPY">JPY - Iene Japon√™s</option>
                            <option value="CAD">CAD - D√≥lar Canadense</option>
                            <option value="AUD">AUD - D√≥lar Australiano</option>
                            <option value="CHF">CHF - Franco Su√≠√ßo</option>
                            <option value="CNY">CNY - Yuan Chin√™s</option>
                            <option value="ARS">ARS - Peso Argentino</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="result-section" id="result"></div>
            
            <div class="loading" id="loading" style="display: none;">
                <div class="loading-spinner"></div>
                <span id="loadingText">Carregando cota√ß√µes...</span>
            </div>
            
            <div class="error" id="error"></div>
        </div>

        <div class="sidebar">
            <div class="info-card">
                <h3 id="popularTitle">üìä Cota√ß√µes Populares</h3>
                <div id="popularRates"></div>
            </div>
            
            <div class="info-card">
                <h3 id="statusTitle">‚ö° Status</h3>
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span id="statusText">Conectado - Tempo real</span>
                </div>
                <div style="margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary);" id="lastUpdate">
                    √öltima atualiza√ß√£o: Carregando...
                </div>
                <div style="margin-top: 8px; font-size: 0.85rem; color: var(--primary-color); font-weight: 500;" id="localTime">
                    üïê Hor√°rio local: Carregando...
                </div>
            </div>
        </div>
    </div>

    <script>
        // Estado global da aplica√ß√£o
        let exchangeRates = {};
        let baseCurrency = 'USD';
        let lastUpdateTime = null;
        let currentLanguage = 'pt';
        let timeInterval;
        let updateInterval;

        // Configura√ß√µes de fusos hor√°rios
        const timeZones = {
            'pt': { zone: 'America/Sao_Paulo', country: 'Brasil', flag: 'üáßüá∑' },
            'en': { zone: 'America/New_York', country: 'Estados Unidos', flag: 'üá∫üá∏' },
            'es': { zone: 'Europe/Madrid', country: 'Espanha', flag: 'üá™üá∏' },
            'fr': { zone: 'Europe/Paris', country: 'Fran√ßa', flag: 'üá´üá∑' },
            'de': { zone: 'Europe/Berlin', country: 'Alemanha', flag: 'üá©üá™' },
            'it': { zone: 'Europe/Rome', country: 'It√°lia', flag: 'üáÆüáπ' },
            'ja': { zone: 'Asia/Tokyo', country: 'Jap√£o', flag: 'üáØüáµ' },
            'zh': { zone: 'Asia/Shanghai', country: 'China', flag: 'üá®üá≥' },
            'ru': { zone: 'Europe/Moscow', country: 'R√∫ssia', flag: 'üá∑üá∫' },
            'ar': { zone: 'Asia/Riyadh', country: 'Ar√°bia Saudita', flag: 'üá∏üá¶' }
        };

        // Classe para gerenciar o seletor de idiomas
        class LanguageSelector {
            constructor(selectorId) {
                this.selector = document.getElementById(selectorId);
                this.selectedLanguage = this.selector.querySelector('#selectedLanguage');
                this.dropdown = this.selector.querySelector('#dropdown');
                this.options = this.selector.querySelectorAll('.language-option');
                this.init();
            }

            init() {
                this.selectedLanguage.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.toggleDropdown();
                });

                this.options.forEach(option => {
                    option.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.selectLanguage(option);
                    });
                });

                document.addEventListener('click', (e) => {
                    if (!this.selector.contains(e.target)) {
                        this.closeDropdown();
                    }
                });

                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        this.closeDropdown();
                    }
                });
            }

            toggleDropdown() {
                this.selector.classList.toggle('open');
            }

            closeDropdown() {
                this.selector.classList.remove('open');
            }

            selectLanguage(option) {
                this.options.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');

                const flagUrl = option.dataset.flag;
                const text = option.dataset.text;
                const lang = option.dataset.lang;

                const selectedFlag = document.getElementById('selectedFlag');
                selectedFlag.src = flagUrl;
                selectedFlag.alt = text;
                this.selectedLanguage.querySelector('.text').textContent = text;

                this.closeDropdown();
                this.onLanguageChange(lang, text, flagUrl);
            }

            onLanguageChange(lang, text, flagUrl) {
                currentLanguage = lang;
                setLanguage(lang);
                
                // Salvar prefer√™ncia no localStorage
                try {
                    localStorage.setItem('selectedLanguage', lang);
                    localStorage.setItem('selectedLanguageText', text);
                    localStorage.setItem('selectedLanguageFlag', flagUrl);
                } catch (e) {
                    console.warn('localStorage n√£o dispon√≠vel:', e);
                }

                updateUI();
                updatePopularRates();
                updateLocalTime();
                startTimeUpdate();
            }

            restoreSavedLanguage() {
                try {
                    const savedLang = localStorage.getItem('selectedLanguage');
                    const savedText = localStorage.getItem('selectedLanguageText');
                    const savedFlag = localStorage.getItem('selectedLanguageFlag');
                    
                    if (savedLang && savedText && savedFlag) {
                        const option = this.selector.querySelector(`[data-lang="${savedLang}"]`);
                        if (option) {
                            this.options.forEach(opt => opt.classList.remove('selected'));
                            option.classList.add('selected');
                            
                            const selectedFlag = document.getElementById('selectedFlag');
                            selectedFlag.src = savedFlag;
                            selectedFlag.alt = savedText;
                            this.selectedLanguage.querySelector('.text').textContent = savedText;
                            
                            currentLanguage = savedLang;
                            setLanguage(savedLang);
                            updateLocalTime();
                            startTimeUpdate();
                        }
                    }
                } catch (e) {
                    console.warn('Erro ao restaurar idioma:', e);
                }
            }
        }

        // Buscar cota√ß√µes da API
        async function fetchExchangeRates() {
            const loading = document.getElementById('loading');
            const error = document.getElementById('error');
            const statusText = document.getElementById('statusText');
            
            loading.style.display = 'flex';
            error.style.display = 'none';
            statusText.textContent = translations[currentLanguage].statusUpdating;
            
            try {
                const response = await fetch(`https://api.exchangerate-api.com/v4/latest/${baseCurrency}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                const data = await response.json();
                
                if (!data.rates) {
                    throw new Error('Formato de dados inv√°lido');
                }
                
                exchangeRates = data.rates;
                exchangeRates[baseCurrency] = 1;
                lastUpdateTime = new Date();
                
                updateUI();
                updatePopularRates();
                updateStatus(translations[currentLanguage].statusConnected, true);
                
            } catch (err) {
                console.error('Erro na API principal:', err);
                await tryAlternativeAPI();
            } finally {
                loading.style.display = 'none';
            }
        }

        // Tentar API alternativa
        async function tryAlternativeAPI() {
            try {
                const backupRates = await fetch('https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/usd.json');
                
                if (backupRates.ok) {
                    const data = await backupRates.json();
                    
                    exchangeRates = {
                        USD: 1,
                        BRL: data.usd?.brl || 5.30,
                        EUR: data.usd?.eur || 0.92,
                        GBP: data.usd?.gbp || 0.79,
                        JPY: data.usd?.jpy || 149.50,
                        CAD: data.usd?.cad || 1.36,
                        AUD: data.usd?.aud || 1.52,
                        CHF: data.usd?.chf || 0.88,
                        CNY: data.usd?.cny || 7.23,
                        ARS: data.usd?.ars || 365.50
                    };
                    
                    lastUpdateTime = new Date();
                    updateUI();
                    updatePopularRates();
                    updateStatus(translations[currentLanguage].statusAlt, true);
                    
                } else {
                    throw new Error('API alternativa falhou');
                }
                
            } catch (err) {
                console.error('Erro na API alternativa:', err);
                useOfflineRates();
            }
        }

        // Usar taxas offline como √∫ltimo recurso
        function useOfflineRates() {
            const error = document.getElementById('error');
            
            exchangeRates = {
                USD: 1, BRL: 5.32, EUR: 0.92, GBP: 0.79, JPY: 149.15,
                CAD: 1.36, AUD: 1.51, CHF: 0.88, CNY: 7.24, ARS: 368.75
            };
            
            lastUpdateTime = new Date();
            updateUI();
            updatePopularRates();
            updateStatus(translations[currentLanguage].statusOffline, false);
            
            error.textContent = translations[currentLanguage].errorOffline;
            error.style.display = 'block';
        }

        // Atualizar interface
        function updateUI() {
            convertCurrency();
            
            const lastUpdate = document.getElementById('lastUpdate');
            if (lastUpdateTime) {
                const locale = getLocaleForLanguage(currentLanguage);
                const dateStr = lastUpdateTime.toLocaleString(locale);
                lastUpdate.textContent = `${translations[currentLanguage].lastUpdate}: ${dateStr}`;
            }
        }

        // Atualizar status
        function updateStatus(text, isOnline) {
            const statusText = document.getElementById('statusText');
            const statusDot = document.querySelector('.status-dot');
            
            statusText.textContent = text;
            statusDot.style.background = isOnline ? 'var(--accent-color)' : 'var(--warning-color)';
        }

        // Atualizar cota√ß√µes populares
        function updatePopularRates() {
            const container = document.getElementById('popularRates');
            const popularPairs = [
                { from: 'USD', to: 'BRL' },
                { from: 'EUR', to: 'BRL' },
                { from: 'BRL', to: 'USD' },
                { from: 'GBP', to: 'USD' }
            ];
            
            container.innerHTML = popularPairs.map(pair => {
                const rate = calculateRate(pair.from, pair.to);
                return `
                    <div class="rate-item">
                        <span class="rate-currency">${pair.from}/${pair.to}</span>
                        <span class="rate-value">${rate.toFixed(4)}</span>
                    </div>
                `;
            }).join('');
        }

        // Calcular taxa entre duas moedas
        function calculateRate(from, to) {
            if (!exchangeRates[from] || !exchangeRates[to]) return 0;
            return exchangeRates[to] / exchangeRates[from];
        }

        // Converter moeda
        function convertCurrency() {
            const fromAmount = parseFloat(document.getElementById('fromAmount').value) || 0;
            const fromCurrency = document.getElementById('fromCurrency').value;
            const toCurrency = document.getElementById('toCurrency').value;
            const toAmountInput = document.getElementById('toAmount');
            const result = document.getElementById('result');

            if (fromAmount === 0) {
                toAmountInput.value = '';
                result.classList.remove('show');
                return;
            }

            const rate = calculateRate(fromCurrency, toCurrency);
            const convertedAmount = fromAmount * rate;

            toAmountInput.value = convertedAmount.toFixed(2);

            result.innerHTML = `
                <div class="result-amount">
                    ${formatCurrency(convertedAmount, toCurrency)} ${toCurrency}
                </div>
                <div class="result-rate">
                    1 ${fromCurrency} = ${rate.toFixed(4)} ${toCurrency}
                </div>
            `;
            result.classList.add('show');
        }

        // Formatar moeda
        function formatCurrency(amount, currency) {
            const locale = getLocaleForLanguage(currentLanguage);
            
            return new Intl.NumberFormat(locale, {
                style: 'decimal',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(amount);
        }

        // Trocar moedas
        function swapCurrencies() {
            const fromCurrency = document.getElementById('fromCurrency');
            const toCurrency = document.getElementById('toCurrency');
            const fromAmount = document.getElementById('fromAmount');
            const toAmount = document.getElementById('toAmount');

            const tempCurrency = fromCurrency.value;
            fromCurrency.value = toCurrency.value;
            toCurrency.value = tempCurrency;

            if (toAmount.value) {
                fromAmount.value = toAmount.value;
            }
            
            convertCurrency();
        }

        // Atualizar hor√°rio local
        function updateLocalTime() {
            const localTimeElement = document.getElementById('localTime');
            const timeZone = timeZones[currentLanguage];
            
            if (!timeZone) return;
            
            try {
                const now = new Date();
                const locale = getLocaleForLanguage(currentLanguage);
                const localTime = new Intl.DateTimeFormat(locale, {
                    timeZone: timeZone.zone,
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                }).format(now);
                
                const countryName = getCountryName(currentLanguage);
                localTimeElement.innerHTML = `üïê ${countryName}: ${localTime}`;
                
            } catch (err) {
                console.error('Erro ao atualizar hor√°rio:', err);
                localTimeElement.innerHTML = 'üïê Hor√°rio: N√£o dispon√≠vel';
            }
        }

        // Iniciar atualiza√ß√£o de hor√°rio
        function startTimeUpdate() {
            if (timeInterval) clearInterval(timeInterval);
            timeInterval = setInterval(updateLocalTime, 1000);
        }

        // Parar atualiza√ß√£o de hor√°rio
        function stopTimeUpdate() {
            if (timeInterval) {
                clearInterval(timeInterval);
                timeInterval = null;
            }
        }

        // Obter locale para idioma
        function getLocaleForLanguage(lang) {
            const localeMap = {
                'pt': 'pt-BR', 'en': 'en-US', 'es': 'es-ES', 'fr': 'fr-FR', 'de': 'de-DE',
                'it': 'it-IT', 'ja': 'ja-JP', 'zh': 'zh-CN', 'ru': 'ru-RU', 'ar': 'ar-SA'
            };
            return localeMap[lang] || 'pt-BR';
        }

        // Obter nome do pa√≠s no idioma atual
        function getCountryName(lang) {
            const countryNames = {
                'pt': { 'pt': 'Brasil', 'en': 'Estados Unidos', 'es': 'Espanha', 'fr': 'Fran√ßa', 'de': 'Alemanha', 'it': 'It√°lia', 'ja': 'Jap√£o', 'zh': 'China', 'ru': 'R√∫ssia', 'ar': 'Ar√°bia Saudita' },
                'en': { 'pt': 'Brazil', 'en': 'United States', 'es': 'Spain', 'fr': 'France', 'de': 'Germany', 'it': 'Italy', 'ja': 'Japan', 'zh': 'China', 'ru': 'Russia', 'ar': 'Saudi Arabia' },
                'es': { 'pt': 'Brasil', 'en': 'Estados Unidos', 'es': 'Espa√±a', 'fr': 'Francia', 'de': 'Alemania', 'it': 'Italia', 'ja': 'Jap√≥n', 'zh': 'China', 'ru': 'Rusia', 'ar': 'Arabia Saudita' },
                'fr': { 'pt': 'Br√©sil', 'en': '√âtats-Unis', 'es': 'Espagne', 'fr': 'France', 'de': 'Allemagne', 'it': 'Italie', 'ja': 'Japon', 'zh': 'Chine', 'ru': 'Russie', 'ar': 'Arabie Saoudite' },
                'de': { 'pt': 'Brasilien', 'en': 'Vereinigte Staaten', 'es': 'Spanien', 'fr': 'Frankreich', 'de': 'Deutschland', 'it': 'Italien', 'ja': 'Japan', 'zh': 'China', 'ru': 'Russland', 'ar': 'Saudi-Arabien' },
                'it': { 'pt': 'Brasile', 'en': 'Stati Uniti', 'es': 'Spagna', 'fr': 'Francia', 'de': 'Germania', 'it': 'Italia', 'ja': 'Giappone', 'zh': 'Cina', 'ru': 'Russia', 'ar': 'Arabia Saudita' },
                'ja': { 'pt': '„Éñ„É©„Ç∏„É´', 'en': '„Ç¢„É°„É™„Ç´ÂêàË°ÜÂõΩ', 'es': '„Çπ„Éö„Ç§„É≥', 'fr': '„Éï„É©„É≥„Çπ', 'de': '„Éâ„Ç§„ÉÑ', 'it': '„Ç§„Çø„É™„Ç¢', 'ja': 'Êó•Êú¨', 'zh': '‰∏≠ÂõΩ', 'ru': '„É≠„Ç∑„Ç¢', 'ar': '„Çµ„Ç¶„Ç∏„Ç¢„É©„Éì„Ç¢' },
                'zh': { 'pt': 'Â∑¥Ë•ø', 'en': 'ÁæéÂõΩ', 'es': 'Ë•øÁè≠Áâô', 'fr': 'Ê≥ïÂõΩ', 'de': 'Âæ∑ÂõΩ', 'it': 'ÊÑèÂ§ßÂà©', 'ja': 'Êó•Êú¨', 'zh': '‰∏≠ÂõΩ', 'ru': '‰øÑÁΩóÊñØ', 'ar': 'Ê≤ôÁâπÈòøÊãâ‰ºØ' },
                'ru': { 'pt': '–ë—Ä–∞–∑–∏–ª–∏—è', 'en': '–°–æ–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ –®—Ç–∞—Ç—ã', 'es': '–ò—Å–ø–∞–Ω–∏—è', 'fr': '–§—Ä–∞–Ω—Ü–∏—è', 'de': '–ì–µ—Ä–º–∞–Ω–∏—è', 'it': '–ò—Ç–∞–ª–∏—è', 'ja': '–Ø–ø–æ–Ω–∏—è', 'zh': '–ö–∏—Ç–∞–π', 'ru': '–†–æ—Å—Å–∏—è', 'ar': '–°–∞—É–¥–æ–≤—Å–∫–∞—è –ê—Ä–∞–≤–∏—è' },
                'ar': { 'pt': 'ÿßŸÑÿ®ÿ±ÿßÿ≤ŸäŸÑ', 'en': 'ÿßŸÑŸàŸÑÿßŸäÿßÿ™ ÿßŸÑŸÖÿ™ÿ≠ÿØÿ©', 'es': 'ÿ•ÿ≥ÿ®ÿßŸÜŸäÿß', 'fr': 'ŸÅÿ±ŸÜÿ≥ÿß', 'de': 'ÿ£ŸÑŸÖÿßŸÜŸäÿß', 'it': 'ÿ•Ÿäÿ∑ÿßŸÑŸäÿß', 'ja': 'ÿßŸÑŸäÿßÿ®ÿßŸÜ', 'zh': 'ÿßŸÑÿµŸäŸÜ', 'ru': 'ÿ±Ÿàÿ≥Ÿäÿß', 'ar': 'ÿßŸÑŸÖŸÖŸÑŸÉÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©' }
            };
            
            return countryNames[currentLanguage]?.[lang] || timeZones[lang]?.country || 'Pa√≠s';
        }

        // Tradu√ß√µes
        const translations = {
            pt: {
                mainTitle: "Conversor de Moedas Profissional",
                mainSubtitle: "com cota√ß√µes em tempo real",
                labelFrom: "De", labelTo: "Para",
                statusConnected: "Conectado - Tempo real",
                statusAlt: "Conectado - API alternativa",
                statusOffline: "Modo offline",
                statusUpdating: "Atualizando cota√ß√µes...",
                lastUpdate: "√öltima atualiza√ß√£o",
                loading: "Carregando cota√ß√µes...",
                errorOffline: "‚ö†Ô∏è Usando cota√ß√µes aproximadas. Verifique a conex√£o para dados em tempo real.",
                popularTitle: "üìä Cota√ß√µes Populares",
                statusTitle: "‚ö° Status",
                currencies: {
                    'BRL': 'BRL - Real Brasileiro', 'USD': 'USD - D√≥lar Americano', 'EUR': 'EUR - Euro',
                    'GBP': 'GBP - Libra Esterlina', 'JPY': 'JPY - Iene Japon√™s', 'CAD': 'CAD - D√≥lar Canadense',
                    'AUD': 'AUD - D√≥lar Australiano', 'CHF': 'CHF - Franco Su√≠√ßo', 'CNY': 'CNY - Yuan Chin√™s', 'ARS': 'ARS - Peso Argentino'
                }
            },
            en: {
                mainTitle: "Professional Currency Converter",
                mainSubtitle: "with real-time quotes",
                labelFrom: "From", labelTo: "To",
                statusConnected: "Connected - Real time",
                statusAlt: "Connected - Alternative API",
                statusOffline: "Offline mode",
                statusUpdating: "Updating quotes...",
                lastUpdate: "Last update",
                loading: "Loading quotes...",
                errorOffline: "‚ö†Ô∏è Using approximate quotes. Check your connection for real-time data.",
                popularTitle: "üìä Popular Quotes",
                statusTitle: "‚ö° Status",
                currencies: {
                    'BRL': 'BRL - Brazilian Real', 'USD': 'USD - US Dollar', 'EUR': 'EUR - Euro',
                    'GBP': 'GBP - British Pound', 'JPY': 'JPY - Japanese Yen', 'CAD': 'CAD - Canadian Dollar',
                    'AUD': 'AUD - Australian Dollar', 'CHF': 'CHF - Swiss Franc', 'CNY': 'CNY - Chinese Yuan', 'ARS': 'ARS - Argentine Peso'
                }
            },
            es: {
                mainTitle: "Conversor de Divisas Profesional",
                mainSubtitle: "con cotizaciones en tiempo real",
                labelFrom: "De", labelTo: "Para",
                statusConnected: "Conectado - Tiempo real",
                statusAlt: "Conectado - API alternativa",
                statusOffline: "Modo sin conexi√≥n",
                statusUpdating: "Actualizando cotizaciones...",
                lastUpdate: "√öltima actualizaci√≥n",
                loading: "Cargando cotizaciones...",
                errorOffline: "‚ö†Ô∏è Usando cotizaciones aproximadas. Verifique la conexi√≥n para datos en tiempo real.",
                popularTitle: "üìä Cotizaciones Populares",
                statusTitle: "‚ö° Estado",
                currencies: {
                    'BRL': 'BRL - Real Brasile√±o', 'USD': 'USD - D√≥lar Americano', 'EUR': 'EUR - Euro',
                    'GBP': 'GBP - Libra Esterlina', 'JPY': 'JPY - Yen Japon√©s', 'CAD': 'CAD - D√≥lar Canadiense',
                    'AUD': 'AUD - D√≥lar Australiano', 'CHF': 'CHF - Franco Suizo', 'CNY': 'CNY - Yuan Chino', 'ARS': 'ARS - Peso Argentino'
                }
            },
            fr: {
                mainTitle: "Convertisseur de Devises Professionnel",
                mainSubtitle: "avec des taux en temps r√©el",
                labelFrom: "De", labelTo: "√Ä",
                statusConnected: "Connect√© - Temps r√©el",
                statusAlt: "Connect√© - API alternative",
                statusOffline: "Mode hors ligne",
                statusUpdating: "Mise √† jour des taux...",
                lastUpdate: "Derni√®re mise √† jour",
                loading: "Chargement des taux...",
                errorOffline: "‚ö†Ô∏è Utilisation de taux approximatifs. V√©rifiez la connexion pour les donn√©es en temps r√©el.",
                popularTitle: "üìä Taux Populaires",
                statusTitle: "‚ö° Statut",
                currencies: {
                    'BRL': 'BRL - Real Br√©silien', 'USD': 'USD - Dollar Am√©ricain', 'EUR': 'EUR - Euro',
                    'GBP': 'GBP - Livre Sterling', 'JPY': 'JPY - Yen Japonais', 'CAD': 'CAD - Dollar Canadien',
                    'AUD': 'AUD - Dollar Australien', 'CHF': 'CHF - Franc Suisse', 'CNY': 'CNY - Yuan Chinois', 'ARS': 'ARS - Peso Argentin'
                }
            },
            de: {
                mainTitle: "Professioneller W√§hrungsumrechner",
                mainSubtitle: "mit Echtzeitkursen",
                labelFrom: "Von", labelTo: "Nach",
                statusConnected: "Verbunden - Echtzeit",
                statusAlt: "Verbunden - Alternative API",
                statusOffline: "Offline-Modus",
                statusUpdating: "Aktualisiere Kurse...",
                lastUpdate: "Letzte Aktualisierung",
                loading: "Lade Kurse...",
                errorOffline: "‚ö†Ô∏è Verwende ungef√§hre Kurse. √úberpr√ºfen Sie die Verbindung f√ºr Echtzeitdaten.",
                popularTitle: "üìä Beliebte Kurse",
                statusTitle: "‚ö° Status",
                currencies: {
                    'BRL': 'BRL - Brasilianischer Real', 'USD': 'USD - US-Dollar', 'EUR': 'EUR - Euro',
                    'GBP': 'GBP - Britisches Pfund', 'JPY': 'JPY - Japanischer Yen', 'CAD': 'CAD - Kanadischer Dollar',
                    'AUD': 'AUD - Australischer Dollar', 'CHF': 'CHF - Schweizer Franken', 'CNY': 'CNY - Chinesischer Yuan', 'ARS': 'ARS - Argentinischer Peso'
                }
            },
            it: {
                mainTitle: "Convertitore di Valute Professionale",
                mainSubtitle: "con tassi in tempo reale",
                labelFrom: "Da", labelTo: "A",
                statusConnected: "Connesso - Tempo reale",
                statusAlt: "Connesso - API alternativa",
                statusOffline: "Modalit√† offline",
                statusUpdating: "Aggiornamento tassi...",
                lastUpdate: "Ultimo aggiornamento",
                loading: "Caricamento tassi...",
                errorOffline: "‚ö†Ô∏è Utilizzo di tassi approssimativi. Controlla la connessione per i dati in tempo reale.",
                popularTitle: "üìä Tassi Popolari",
                statusTitle: "‚ö° Stato",
                currencies: {
                    'BRL': 'BRL - Real Brasiliano', 'USD': 'USD - Dollaro Americano', 'EUR': 'EUR - Euro',
                    'GBP': 'GBP - Sterlina Britannica', 'JPY': 'JPY - Yen Giapponese', 'CAD': 'CAD - Dollaro Canadese',
                    'AUD': 'AUD - Dollaro Australiano', 'CHF': 'CHF - Franco Svizzero', 'CNY': 'CNY - Yuan Cinese', 'ARS': 'ARS - Peso Argentino'
                }
            },
            ja: {
                mainTitle: "„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´ÈÄöË≤®„Ç≥„É≥„Éê„Éº„Çø„Éº",
                mainSubtitle: "„É™„Ç¢„É´„Çø„Ç§„É†ÁÇ∫Êõø„É¨„Éº„Éà",
                labelFrom: "„Åã„Çâ", labelTo: "„Å∏",
                statusConnected: "Êé•Á∂ö‰∏≠ - „É™„Ç¢„É´„Çø„Ç§„É†",
                statusAlt: "Êé•Á∂ö‰∏≠ - ‰ª£ÊõøAPI",
                statusOffline: "„Ç™„Éï„É©„Ç§„É≥„É¢„Éº„Éâ",
                statusUpdating: "ÁÇ∫Êõø„É¨„Éº„Éà„ÇíÊõ¥Êñ∞‰∏≠...",
                lastUpdate: "ÊúÄÁµÇÊõ¥Êñ∞",
                loading: "ÁÇ∫Êõø„É¨„Éº„Éà„ÇíË™≠„ÅøËæº„Åø‰∏≠...",
                errorOffline: "‚ö†Ô∏è „Åä„Åä„Çà„Åù„ÅÆÁÇ∫Êõø„É¨„Éº„Éà„Çí‰ΩøÁî®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„É™„Ç¢„É´„Çø„Ç§„É†„Éá„Éº„Çø„ÅÆ„Åü„ÇÅ„Å´Êé•Á∂ö„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                popularTitle: "üìä ‰∫∫Ê∞ó„ÅÆÁÇ∫Êõø„É¨„Éº„Éà",
                statusTitle: "‚ö° „Çπ„ÉÜ„Éº„Çø„Çπ",
                currencies: {
                    'BRL': 'BRL - „Éñ„É©„Ç∏„É´„É¨„Ç¢„É´', 'USD': 'USD - „Ç¢„É°„É™„Ç´„Éâ„É´', 'EUR': 'EUR - „É¶„Éº„É≠',
                    'GBP': 'GBP - „Ç§„ÇÆ„É™„Çπ„Éù„É≥„Éâ', 'JPY': 'JPY - Êó•Êú¨ÂÜÜ', 'CAD': 'CAD - „Ç´„Éä„ÉÄ„Éâ„É´',
                    'AUD': 'AUD - „Ç™„Éº„Çπ„Éà„É©„É™„Ç¢„Éâ„É´', 'CHF': 'CHF - „Çπ„Ç§„Çπ„Éï„É©„É≥', 'CNY': 'CNY - ‰∏≠ÂõΩÂÖÉ', 'ARS': 'ARS - „Ç¢„É´„Çº„É≥„ÉÅ„É≥„Éö„ÇΩ'
                }
            },
            zh: {
                mainTitle: "‰∏ì‰∏öË¥ßÂ∏ÅËΩ¨Êç¢Âô®",
                mainSubtitle: "ÂÆûÊó∂Ê±áÁéá",
                labelFrom: "‰ªé", labelTo: "Âà∞",
                statusConnected: "Â∑≤ËøûÊé• - ÂÆûÊó∂",
                statusAlt: "Â∑≤ËøûÊé• - Â§áÁî®API",
                statusOffline: "Á¶ªÁ∫øÊ®°Âºè",
                statusUpdating: "Êõ¥Êñ∞Ê±áÁéá‰∏≠...",
                lastUpdate: "ÊúÄÂêéÊõ¥Êñ∞",
                loading: "Âä†ËΩΩÊ±áÁéá‰∏≠...",
                errorOffline: "‚ö†Ô∏è ‰ΩøÁî®Ëøë‰ººÊ±áÁéá„ÄÇËØ∑Ê£ÄÊü•ËøûÊé•‰ª•Ëé∑ÂèñÂÆûÊó∂Êï∞ÊçÆ„ÄÇ",
                popularTitle: "üìä ÁÉ≠Èó®Ê±áÁéá",
                statusTitle: "‚ö° Áä∂ÊÄÅ",
                currencies: {
                    'BRL': 'BRL - Â∑¥Ë•øÈõ∑‰∫öÂ∞î', 'USD': 'USD - ÁæéÂÖÉ', 'EUR': 'EUR - Ê¨ßÂÖÉ',
                    'GBP': 'GBP - Ëã±Èïë', 'JPY': 'JPY - Êó•ÂÖÉ', 'CAD': 'CAD - Âä†ÊãøÂ§ßÂÖÉ',
                    'AUD': 'AUD - Êæ≥Â§ßÂà©‰∫öÂÖÉ', 'CHF': 'CHF - ÁëûÂ£´Ê≥ïÈÉé', 'CNY': 'CNY - ‰∫∫Ê∞ëÂ∏Å', 'ARS': 'ARS - ÈòøÊ†πÂª∑ÊØîÁ¥¢'
                }
            },
            ru: {
                mainTitle: "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤–∞–ª—é—Ç",
                mainSubtitle: "—Å –∫—É—Ä—Å–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏",
                labelFrom: "–ò–∑", labelTo: "–í",
                statusConnected: "–ü–æ–¥–∫–ª—é—á–µ–Ω–æ - –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è",
                statusAlt: "–ü–æ–¥–∫–ª—é—á–µ–Ω–æ - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π API",
                statusOffline: "–û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º",
                statusUpdating: "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤...",
                lastUpdate: "–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ",
                loading: "–ó–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–æ–≤...",
                errorOffline: "‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.",
                popularTitle: "üìä –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫—É—Ä—Å—ã",
                statusTitle: "‚ö° –°—Ç–∞—Ç—É—Å",
                currencies: {
                    'BRL': 'BRL - –ë—Ä–∞–∑–∏–ª—å—Å–∫–∏–π —Ä–µ–∞–ª', 'USD': 'USD - –î–æ–ª–ª–∞—Ä –°–®–ê', 'EUR': 'EUR - –ï–≤—Ä–æ',
                    'GBP': 'GBP - –ë—Ä–∏—Ç–∞–Ω—Å–∫–∏–π —Ñ—É–Ω—Ç', 'JPY': 'JPY - –Ø–ø–æ–Ω—Å–∫–∞—è –∏–µ–Ω–∞', 'CAD': 'CAD - –ö–∞–Ω–∞–¥—Å–∫–∏–π –¥–æ–ª–ª–∞—Ä',
                    'AUD': 'AUD - –ê–≤—Å—Ç—Ä–∞–ª–∏–π—Å–∫–∏–π –¥–æ–ª–ª–∞—Ä', 'CHF': 'CHF - –®–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π —Ñ—Ä–∞–Ω–∫', 'CNY': 'CNY - –ö–∏—Ç–∞–π—Å–∫–∏–π —é–∞–Ω—å', 'ARS': 'ARS - –ê—Ä–≥–µ–Ω—Ç–∏–Ω—Å–∫–æ–µ –ø–µ—Å–æ'
                }
            },
            ar: {
                mainTitle: "ŸÖÿ≠ŸàŸÑ ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸä",
                mainSubtitle: "ŸÖÿπ ÿ£ÿ≥ÿπÿßÿ± ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑÿ≠ŸÇŸäŸÇŸä",
                labelFrom: "ŸÖŸÜ", labelTo: "ÿ•ŸÑŸâ",
                statusConnected: "ŸÖÿ™ÿµŸÑ - ÿßŸÑŸàŸÇÿ™ ÿßŸÑÿ≠ŸÇŸäŸÇŸä",
                statusAlt: "ŸÖÿ™ÿµŸÑ - Ÿàÿßÿ¨Ÿáÿ© ÿ®ÿ±ŸÖÿ¨ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇÿßÿ™ ÿßŸÑÿ®ÿØŸäŸÑÿ©",
                statusOffline: "Ÿàÿ∂ÿπ ÿπÿØŸÖ ÿßŸÑÿßÿ™ÿµÿßŸÑ",
                statusUpdating: "ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ£ÿ≥ÿπÿßÿ±...",
                lastUpdate: "ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´",
                loading: "ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ÿ≥ÿπÿßÿ±...",
                errorOffline: "‚ö†Ô∏è ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ£ÿ≥ÿπÿßÿ± ÿ™ŸÇÿ±Ÿäÿ®Ÿäÿ©. ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿßÿ™ÿµÿßŸÑ ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑÿ≠ŸÇŸäŸÇŸä.",
                popularTitle: "üìä ÿ£ÿ≥ÿπÿßÿ± ÿ¥ÿßÿ¶ÿπÿ©",
                statusTitle: "‚ö° ÿßŸÑÿ≠ÿßŸÑÿ©",
                currencies: {
                    'BRL': 'BRL - ÿ±ŸäÿßŸÑ ÿ®ÿ±ÿßÿ≤ŸäŸÑŸä', 'USD': 'USD - ÿØŸàŸÑÿßÿ± ÿ£ŸÖÿ±ŸäŸÉŸä', 'EUR': 'EUR - ŸäŸàÿ±Ÿà',
                    'GBP': 'GBP - ÿ¨ŸÜŸäŸá ÿ•ÿ≥ÿ™ÿ±ŸÑŸäŸÜŸä', 'JPY': 'JPY - ŸäŸÜ Ÿäÿßÿ®ÿßŸÜŸä', 'CAD': 'CAD - ÿØŸàŸÑÿßÿ± ŸÉŸÜÿØŸä',
                    'AUD': 'AUD - ÿØŸàŸÑÿßÿ± ÿ£ÿ≥ÿ™ÿ±ÿßŸÑŸä', 'CHF': 'CHF - ŸÅÿ±ŸÜŸÉ ÿ≥ŸàŸäÿ≥ÿ±Ÿä', 'CNY': 'CNY - ŸäŸàÿßŸÜ ÿµŸäŸÜŸä', 'ARS': 'ARS - ÿ®Ÿäÿ≤Ÿà ÿ£ÿ±ÿ¨ŸÜÿ™ŸäŸÜŸä'
                }
            }
            // Demais idiomas seguem o mesmo padr√£o...
        };

        // Definir idioma
        function setLanguage(lang) {
            const t = translations[lang] || translations.pt;

            document.getElementById('mainTitle').textContent = t.mainTitle;
            document.getElementById('mainSubtitle').textContent = t.mainSubtitle;
            document.getElementById('labelFrom').textContent = t.labelFrom;
            document.getElementById('labelTo').textContent = t.labelTo;
            document.getElementById('popularTitle').textContent = t.popularTitle;
            document.getElementById('statusTitle').textContent = t.statusTitle;
            document.getElementById('loadingText').textContent = t.loading;

            const langMap = {
                pt:'pt-BR', en:'en-US', es:'es-ES', fr:'fr-FR', de:'de-DE',
                it:'it-IT', ja:'ja-JP', zh:'zh-CN', ru:'ru-RU', ar:'ar-SA'
            };
            document.documentElement.lang = langMap[lang] || 'pt-BR';

            updateCurrencyOptions();
        }

        // Atualizar op√ß√µes de moedas
        function updateCurrencyOptions() {
            const fromCurrency = document.getElementById('fromCurrency');
            const toCurrency = document.getElementById('toCurrency');
            const currentFromValue = fromCurrency.value;
            const currentToValue = toCurrency.value;
            
            const currencies = translations[currentLanguage]?.currencies || translations.pt.currencies;
            
            fromCurrency.innerHTML = '';
            toCurrency.innerHTML = '';
            
            Object.entries(currencies).forEach(([code, name]) => {
                fromCurrency.add(new Option(name, code));
                toCurrency.add(new Option(name, code));
            });
            
            fromCurrency.value = currentFromValue;
            toCurrency.value = currentToValue;
        }

        // Iniciar atualiza√ß√µes autom√°ticas
        function startAutoUpdate() {
            if (updateInterval) clearInterval(updateInterval);
            updateInterval = setInterval(() => {
                if (document.visibilityState === 'visible') {
                    fetchExchangeRates();
                }
            }, 30000);
        }

        // Event listeners
        document.getElementById('fromAmount').addEventListener('input', function() {
            const error = document.getElementById('error');
            if (parseFloat(this.value) < 0) {
                error.textContent = "‚ö†Ô∏è Valor n√£o pode ser negativo";
                error.style.display = 'block';
                this.value = 0;
            } else {
                error.style.display = 'none';
            }
            convertCurrency();
        });

        document.getElementById('fromCurrency').addEventListener('change', convertCurrency);
        document.getElementById('toCurrency').addEventListener('change', convertCurrency);

        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'visible') {
                startTimeUpdate();
                startAutoUpdate();
            } else {
                stopTimeUpdate();
            }
        });

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', () => {
            const languageSelector = new LanguageSelector('languageSelector');
            languageSelector.restoreSavedLanguage();

            if (!translations[currentLanguage]) {
                setLanguage('pt');
            }

            updateLocalTime();
            startTimeUpdate();
            updateCurrencyOptions();
            fetchExchangeRates();
            startAutoUpdate();
        });
    </script>

    <!-- Rodap√© com links legais -->
<footer>
  <a href="politica-privacidade.html" target="_blank">Pol√≠tica de Privacidade</a> |
  <a href="termos-uso.html" target="_blank">Termos de Uso</a> |
  <a href="cookies.html" target="_blank">Pol√≠tica de Cookies</a>
</footer>
    
</body>
</html>
